<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" >
<head>	
  <!-- This site is based on the Auguste template designed and coded [Gian Carlo Franco](www.carlofranco.ca). Antique variation by Brett Terpstra. -->
	<title>Edit your WordPress QuickTags the right way</title>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="readability-verification" content="rbPZmz5uZnPmEg4UNerszNZUcyxN2aHQL7XcRewB">
	<meta name="description" content="" />
	<meta name="keywords" content="" />
  <link rel='me' href='http://www.google.com/profiles/circlesixdesign' />
	<meta name="robots" content="all" />
	<meta name="robots" content="index, follow" />
	<meta name="revisit-after" content="7 days" />
	<meta name="version" content="1.0" />
	<meta name="copyright" content="" />
	<link rel="icon" type="image/vnd.microsoft.icon" href="/favicon.ico" />
	<link rel="apple-touch-icon" href="/favicon.png"/>
	<link rel="alternate" type="application/atom+xml" title="brettterpstra.dev RSS Feed" href="/feed.xml" />
	<!-- CSS -->
	<link rel="stylesheet" href="/css/style.css" media="screen" type="text/css"/>
	<link rel="stylesheet" href="/css/monokai.css" media="screen" type="text/css"/>
	<!-- <link rel="stylesheet" href="/css/screen.min.css" media="screen" type="text/css"/> -->
	<!--[if IE 6]>
	<link href="/css/ie.css" rel="stylesheet" media="screen" type="text/css" />
	<![endif]-->
</head>
<body class="blog single-post">
	<div id="header-wrapper">
		<div id="header">
			<h1>
				<a id="logo" href="/" title="Brett Terpstra">Brett Terpstra</a>
			</h1>
			<div id="nav">
	<ul>
		<li><a id="homebutton" href="/">Home</a></li>
		<li><a id="catebutton" href="/categories/">Categories</a></li>
		<li><a id="tagbutton"  href="/tags/">Topics</a></li>
		<li><a id="contactbutton" href="/contact/">Contact</a></li>
    <!-- <li><a id="projectbutton" href="#">Projects</a></li> -->
		<li><a id="aboutbutton" href="/about/">About</a></li>
	</ul>
</div><!-- end: #nav -->
		</div><!-- end: #header -->
	</div><!-- end: #header-wrapper-->
	<div id="content-wrapper">
		<div id="main-container" class="clearfix">
			<div id="content">
	<div class="post">
		<div class="post-meta">
			<span class="date">06 Nov 2010 | </span>
			<span class="num-comments"><a href="#comments"><span class="responses-number">0</span> Comments</a> | </span>
			<span class="categories">
				Category: <a href="/categories/code">Code</a>
			</span>
		</div>
		<h1 class="post-title"><a href="#">Edit your WordPress QuickTags the right way</a></h1>
		<p>You may have cause, at some point, to modify the behavior of the QuickTags in the HTML editor of WordPress (the non-WYSIWYG, non-&ldquo;Visual&rdquo; editor). There are a lot of tutorials available for editing the quicktags.js file in the WordPress wp-includes folder, but they all seem to want you to edit the file directly. That&rsquo;s a Bad Idea&trade; because the next time you upgrade, your changes are kaput. Here&rsquo;s how to make your own quicktags.js and do whatever you want with it.</p>

<p>There are some perfectly capable plugins for adding new buttons, too. This morning I wanted to change the behavior of existing buttons, though, so it came down to this.</p>

<p>This post is directed toward people who are at least moderately comfortable editing php and javascript. I&rsquo;m not going to go into a lot of detail on the actual edits, but will get you started on modifying your QuickTags and provide some source code.</p>

<!--more-->

<h3 id="the-quicktagsjs-file">The quicktags.js file</h3>

<p>Go into the /wp-includes/js folder and find quicktags.dev.js. Copy it to your template folder (or any subfolder) and rename it quicktags.js.</p>

<p>Edit the file. The code has some localization in it which we&rsquo;re about to break, so search for quicktagsL10n and replace every instance with an appropriate, quoted string. For example, you&rsquo;ll find <code>quicktagsL10n.enterURL</code>, which should be replaced with something like &lsquo;Enter the URL&rsquo;. You can find all of the original strings in /wp-includes/script-loader.php, if you like.&lt;/p&gt;</p>

<p>Now you can edit the buttons and functions as you see fit. There&rsquo;s a pretty good <a href="http://www.tamba2.org.uk/wordpress/quicktags/">overview at Tamba2</a>. You&rsquo;ll notice that some buttons have functions associated with them, such as the &ldquo;link&rdquo; and &ldquo;img&rdquo; buttons, so be sure to edit those as well if you&rsquo;re modifying those buttons.</p>

<h3 id="overriding-the-original">Overriding the original</h3>

<p>Now we just need to change which script gets called when you&rsquo;re in the post editor. Add the following to your theme&rsquo;s functions.php file:</p>

<div class="highlight"><pre><code class="php"><span class="x">function bt_load_admin_scripts()</span>
<span class="x">{</span>
<span class="x">  if ( is_admin() ) {</span>
<span class="x">    wp_deregister_script(&#39;quicktags&#39;);</span>
<span class="x">    wp_register_script(&#39;quicktags&#39;, (&amp;quot;/path/to/your/quicktags.js&amp;quot;), false, &#39;&#39;, true);</span>
<span class="x">  }</span>
<span class="x">}</span>

<span class="x">if (is_admin()) {</span>
<span class="x">  add_action(&#39;init&#39;, bt_load_admin_scripts);</span>
<span class="x">}</span>
</code></pre>
</div>

<p>Modify the path in wp_register_script to point to the location where you put your quicktags.js file. This will tell WordPress to load your file instead of its own.</p>

<p>Now, edit a new post (in the HTML editor, not the Visual editor) to test out your changes. If everything is correct, modified and new buttons should show up and function the way you want. Your changes will persist, even after a WordPress upgrade!</p>

<p>Here&rsquo;s my copy of quicktags.js, modified to turn it into a Markdown editor.</p>

<p>[download id=23]</p>

	</div>
	<div class="nextprev clearfix">
		<a class="prev" href="/web-excursions-november-4-november-5"><span>Web excursions: November 4  November 5</span><br/>&larr; Previous Entry</a>
		<a class="next" href="/web-excursions-november-5-november-7"><span>Web excursions: November 5  November 7</span><br/>Next Entry &rarr;</a>
	</div>
	<div class="related-posts section">
		<h3 class="uppercase-title">Related Posts</h3>
		<ol>
			
				<li><a href="/oft-bash-function-for-opening-a-specific-filetype">oft: Bash function for opening a specific filetype</a></li>
			
				<li><a href="/otask-cli-for-omnifocus">OTask: CLI for OmniFocus</a></li>
			
				<li><a href="/web-excursions-june-28-2011-june-30-2011">Web excursions: June 28, 2011 - June 30, 2011</a></li>
			
				<li><a href="/web-excursions-june-15-2011-june-23-2011">Web excursions: June 15, 2011 - June 23, 2011</a></li>
			
				<li><a href="/a-bash-function-for-markdown-bloggers">A Bash function for Markdown bloggers</a></li>
			
		</ol>
	</div><!-- end: related-posts -->
	<div id="comments" class="section">
		<div id="num-responses"><span class="responses-number">0</span> Responses. <a href="#comments">Add Yours!</a></div>
		<h3>Discussion</h3>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
		<div id="disqus_thread" name="#comments">
		</div>
	</div>
</div><!-- end: #content-->
<div id="sidebar">
	<div id="side-intro" class="section">
	<div id="side-description">
		<p><strong>Brett Terpstra</strong> is Tech Lead for the blogs of AOL Tech. In his free time, he performs mad science with code and shares the results with whoever is curious.</p>
	</div>
	<div id="update-icons">
		<ul>
			<li class="rss"><a href="/feed.xml" title="Grab the Feed">RSS</a></li>
			<li class="twitter"><a class="twitter-anywhere-user" href="http://www.twitter.com/ttscoff">@ttscoff</a></li>
		</ul>
	</div>
</div>
	<div id="side-tabs">
	<ul class="tabnav clearfix">
		<li class="active"><a href="#ui-tabs-1">Recent</a></li>
		<li><a href="#ui-tabs-2">Categories</a></li>
		<li><a href="#ui-tabs-3">Projects</a></li>
	</ul>
	<div id="ui-tabs-1" class="tab-content">
		<ul>
			
				<li><a href="/oft-bash-function-for-opening-a-specific-filetype/" title="oft: Bash function for opening a specific filetype">oft: Bash function for opening a specific filetype</a></li>
			
				<li><a href="/otask-cli-for-omnifocus/" title="OTask: CLI for OmniFocus">OTask: CLI for OmniFocus</a></li>
			
				<li><a href="/web-excursions-june-28-2011-june-30-2011/" title="Web excursions: June 28, 2011 - June 30, 2011">Web excursions: June 28, 2011 - June 30, 2011</a></li>
			
				<li><a href="/web-excursions-june-15-2011-june-23-2011/" title="Web excursions: June 15, 2011 - June 23, 2011">Web excursions: June 15, 2011 - June 23, 2011</a></li>
			
				<li><a href="/a-bash-function-for-markdown-bloggers/" title="A Bash function for Markdown bloggers">A Bash function for Markdown bloggers</a></li>
			
		</ul>
		<a href="/2011/" class="btn-more">more &raquo;</a>
	</div>
	<div id="ui-tabs-2" class="tab-content">
		<ul>
			
				<li><a href="/categories/misc">Misc</a></li>
			
				<li><a href="/categories/blog">Blog</a></li>
			
				<li><a href="/categories/code">Code</a></li>
			
				<li><a href="/categories/bookmarks">Bookmarks</a></li>
			
				<li><a href="/categories/music">Music</a></li>
			
				<li><a href="/categories/write">Write</a></li>
			
		</ul>
		<a href="/categories/" class="btn-more">more &raquo;</a>
	</div>
	
  
  <div id="ui-tabs-3" class="tab-content">
  	<a href="#" class="btn-more">more &raquo;</a>
  	
  	</ul>
  </div>
  
</div>
	<div id="popular-tags" class="section">	
	<h2 class="section-title">Topics</h2>
	<ul>
		
			<li><a href="/tags/markdown" name="markdown">markdown</a></li>
		
			<li><a href="/tags/wordpress" name="wordpress">Wordpress</a></li>
		
			<li><a href="/tags/hacks" name="hacks">hacks</a></li>
		
	</ul>
</div>
</div><!-- end: #sidebar -->
<script type="text/javascript">
    var disqus_shortname = 'brettterpstra';
    var disqus_identifier = 'edit-your-wordpress-quicktags-the-right-way';
    var disqus_url = 'http://brettterpstra.github.com/edit-your-wordpress-quicktags-the-right-way';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>

		</div><!-- end: #main-container -->
	</div><!-- end: #content-wrapper -->
	<div id="footer-wrapper">
	<div id="footer">
		<div id="colophon">
			<p>Copyright &copy; 2011 Brett Terpstra. All Rights Reserved.</p>
		</div>
	</div><!-- end: #footer -->
</div><!-- end: #footer-wrapper -->
	<!-- Javascript -->
	<script src="/js/jquery.min.js" type="text/javascript"></script>
	<script src="/js/ui.tabs.min.js" type="text/javascript"></script>
	<script src="/js/scripts.js" type="text/javascript"></script>
	
  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
      var disqus_shortname = 'brettterpstra'; // required: replace example with your forum shortname

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function () {
          var s = document.createElement('script'); s.async = true;
          s.type = 'text/javascript';
          s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
          (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
      }());
  </script>
</body>
</html>